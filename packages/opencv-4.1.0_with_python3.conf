pkg_info() {
	_xDESC="C++11 Lightweight Redis client: async, thread-safe, no dependency, pipelining, multi-platfor"

    _xVER_=4.1.0
    _xPKG_NAME_=opencv

	_xFILE="${_xPKG_NAME_}-${_xVER_}.zip"
	_xFILE_PATH=${_xPKG_NAME_}-${_xVER_}
	_xNAME=${_xPKG_NAME_}/${_xVER_}
}

pkg_build() {

	if [ -e "./_build" ]; then
		log_msg "[CMD] $(pwd) - rm -rf ./_build"
		rm -rf ./_build
	fi
	(
        mkdir -p _build && cd _build \
        && cmake .. \
            -DCMAKE_INSTALL_PREFIX=${PREFIX} \
            -DCMAKE_BUILD_TYPE=Release \
            -DPYTHON_DEFAULT_EXECUTABLE=$(which python3)\
            -DPYTHON3_EXECUTABLE=$(which python3) \
            -DPYTHON3_PACKAGES_PATH=$(python3 -c "import site; print(site.getsitepackages()[0])") \
            -DPYTHON3_NUMPY_INCLUDE_DIRS=$(python3 -c "import numpy, os; print(os.path.join(numpy.__path__[0], 'core/include'))") \
            -DPYTHON3_INCLUDE_DIR=$(python3 -c "from sysconfig import get_path; print(get_path('include'))") \
            -DBUILD_opencv_python2=OFF \
            -DBUILD_opencv_python3=ON \
            -DWITH_CUDA=OFF -DWITH_CUFFT=ON -DWITH_CUBLAS=ON \
            -DWITH_TBB=ON \
            -DWITH_IPP=OFF \
            -DWITH_1394=OFF \
            -DWITH_QT=ON \
            -DWITH_GTK=OFF \
            -DWITH_OPENGL=ON \
            -DWITH_V4L=ON  \
            -DWITH_FFMPEG=ON \
            -DWITH_XINE=ON \
            -DBUILD_NEW_PYTHON_SUPPORT=ON \
            -DBUILD_WITH_DEBUG_INFO=OFF \
            -DBUILD_DOCS=OFF \
            -DBUILD_EXAMPLES=OFF \
            -DBUILD_TESTS=OFF \
            -DBUILD_PERF_TESTS=OFF \
            -DBUILD_PNG=ON \
            -DBUILD_JPEG=ON \
            -DBUILD_JASPER=ON \
            -DBUILD_ZLIB=ON \
            -DBUILD_TIFF=ON \
            -DBUILD_JAVA=OFF \
            -DOPENCV_GENERATE_PKGCONFIG=ON \
            -DOPENCV_ENABLE_NONFREE=ON \
            -DINSTALL_C_EXAMPLES=OFF \
            -DINSTALL_PYTHON_EXAMPLES=OFF \
        && make -j 6 && make install
	)
}
