pkg_info() {
    _xDESC="Interpreted, interactive, object-oriented programming language"

    _xVER_=3.7.0
    _xPKG_NAME_=python

    _xFILE="Python-${_xVER_}.tgz"
    _xFILE_PATH=Python-${_xVER_}
    _xNAME=${_xPKG_NAME_}/${_xVER_}

    _xOPT_NAME=python3
}

pkg_build() {

    func_pkgconfig "openssl" "libffi" "expat"

    openssl_CFLAGS=$(pkg-config --cflags openssl)
    openssl_LIBS=$(pkg-config --libs openssl)

    libffi_CFLAGS=$(pkg-config --cflags libffi)
    libffi_LIBS=$(pkg-config --libs libffi)

    expat_CFLAGS=$(pkg-config --cflags expat)
    expat_LIBS=$(pkg-config --libs expat)

    if [ ${_OS_NAME} = "Darwin" ]; then
        MACOSX_DEPLOYMENT_TARGET=10.13
    fi
    CFLAGS="${openssl_CFLAGS} ${libffi_CFLAGS} ${expat_CFLAGS}" \
    LDFLAGS="${openssl_LIBS} ${libffi_LIBS} ${expat_LIBS}" \
    ./configure --prefix=${PREFIX} \
        --enable-ipv6 \
        --enable-shared \
        --with-threads \
        --without-gcc \
        --with-system-expat \
        --with-system-ffi \
        --with-tcltk-includes='-I${APP_PREFIX}/opt/tcl/include -I${APP_PREFIX}/opt/tk/include' \
        --with-tcltk-libs='${APP_PREFIX}/opt/tcl/lib/libtcl8.6.so ${APP_PREFIX}/opt/tk/lib/libtk8.6.so' \
    && make -j 6 && make install && (
        cd ${PREFIX}/bin && if [ ! -e "python" ] && [ -e "python3.7" ] ; then
            ln -s python3.7 python
        fi
    )
}
